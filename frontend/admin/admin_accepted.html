<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accepted Offers â€” Admin</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/dashboard.css">
</head>

<body>

<nav class="dash-navbar">
  <div class="dash-logo">OPTIBIDS-RFP</div>
  <ul class="dash-menu">
    <li><a href="admin_dashboard.html">Dashboard</a></li>
    <li><a class="active">Accepted Offers</a></li>
    <li><a onclick="auth.logout()">Logout</a></li>
  </ul>
</nav>

<div class="dash-container">
  <div class="section-card">
    <h2>Accepted Offers</h2>
    <div id="accepted-admin-box" class="card-list"></div>
  </div>
</div>

<script src="../js/api.js"></script>
<script src="../js/auth.js"></script>
<script>
async function loadAcceptedAdmin() {
  const box = document.getElementById("accepted-admin-box");
  const data = await api.get("/admin/accepted-offers");

  if (!data.length) {
    box.innerHTML = "<p class='muted'>No accepted offers yet.</p>";
    return;
  }

  box.innerHTML = "";
  data.forEach(o => {
    const div = document.createElement("div");
    div.className = "item status-accepted";
    div.innerHTML = `
      <h3>${o.tender_title}</h3>
      <p><b>Applicant:</b> ${o.applicant_email}</p>
      <p>${o.offer?.message || ""}</p>
    `;
    box.appendChild(div);
  });
}

loadAcceptedAdmin();
</script>

</body>
</html>
